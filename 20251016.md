### 本日の学び

### omitempty/omitzero

構造体に対するomitzeroは`{}`, omitemptyはjsonKVがないことを表す。<br>
ここで、`*struct`のゼロ値はnil?なので`*struct`で定義した構造体では`key: {}`のようなjsonは無視できない

```go
package main

import (
	"encoding/json"
	"fmt"
)

type Content struct {
	Type string `json:"type,omitempty,omitzero"`
}

type Item struct {
	Type    string  `json:"type,omitempty,omitzero"`
	Content Content `json:"content,omitempty,omitzero"`
}

// Item2とItem1は構造以上の違いはない
type Item2 *struct {
	Type    string `json:"type,omitempty,omitzero"`
	Content *struct {
		Type string `json:"type,omitempty,omitzero"`
	} `json:"content,omitempty,omitzero"`
}

type Wrapped struct {
	Item Item2 `json:"item"`
}

func main() {
	// --- 入力JSON文字列 ---
  // "content": {}を無視するにはstructのomitzeroが必要
	input := `{
		"item": {
			"type": "exampleType",
			"content": {} 
		}
	}`

	// --- JSON → 構造体 ---
	var w Wrapped
	if err := json.Unmarshal([]byte(input), &w); err != nil {
		panic(err)
	}

	// --- 構造体の確認 ---
	fmt.Printf("Struct:\n%+v\n\n", w)

	// --- 構造体 → JSON ---
	output, err := json.MarshalIndent(w, "", "  ")
	if err != nil {
		panic(err)
	}

	fmt.Println("JSON:")
	fmt.Println(string(output))
}
```

*`*struct`のゼロ値がniiかどうかはちゃんと調べていない<br>
*https://future-architect.github.io/articles/20250129a/ によるとゼロ値をカスタマイズできる`IsZero`インタフェースも用意されているらしい